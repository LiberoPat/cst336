<! DOCTYPE html>
<html>
        <head>
            <title>Products Page</title>
            <meta charset="UTF-8">
            <meta name="viewport" content="width=device-width, initial-scale=1">
            <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
            <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
            <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
                    rel="stylesheet" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk"
                            crossorigin="anonymous">
            <link rel="stylesheet" href="css/styles.css" />
            <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

        </head>
        <body>
        <div class='container'>
            <div class='text-center'>
                
                <!-- Bootstrap Navagation Bar -->
                <nav class='navbar navbar-default - navbar-fixed-top'>
                    <div class='container-fluid'>
                        <div class='navbar-header'>
                            <a class='navbar-brand' href='#'>Shopping Land</a>
                        </div>
                        <ul class='nav navbar-nav'>
                            <li><a href='index.html'>Home</a></li>
                        </ul>
                    </div>
                </nav>
                <br /> <br /> <br />
                
                <!-- Search Form -->
                <form enctype="text/plain">
                    <div class="form-group">
                        <label for="pName">Product Name</label>
                        <input type="text" class="form-control" name="query" id="pName" placeholder="Search">
                    </div>
                    <!--<input type="submit" value="Submit" class="btn btn-default">-->
                    <br /><br />
                </form>
                <table class='table text-center'>
                <tr>
                <th><h4>Image</h4></th>
                <th><h4>Product</h4></th>
                <th><h4>Price (in USD)</h4></th>
                </tr>
                <tr>
                <td><img ><span id="pic0"></span></td>
                <td><h4><span id="item0"></span></h4></td>
                <td><h4><span id = "price0"> </span></h4></td>
                </tr>
                <tr>
                <td><img ><span id="pic1"></span></td>
                <td><h4><span id="item1"></span></h4></td>
                <td><h4><span id = "price1"> </span></h4></td>
                </tr> 
                <tr>
                <td><img ><span id="pic2"></span></td>
                <td><h4><span id="item2"></span></h4></td>
                <td><h4><span id = "price2"> </span></h4></td>
                </tr>
                <tr>
                <td><img ><span id="pic3"></span></td>
                <td><h4><span id="item3"></span></h4></td>
                <td><h4><span id = "price3"> </span></h4></td>
                </tr>
                <tr>
                <td><img ><span id="pic4"></span></td>
               <td><h4><span id="item4"></span></h4></td>
                <td><h4><span id = "price4"> </span></h4></td> 
                </tr>
                <tr>
                <td><img ><span id="pic5"></span></td>
                <td><h4><span id="item5"></span></h4></td>
                <td><h4><span id = "price5"> </span></h4></td>  
                </tr>
                <tr>
                <td><img ><span id="pic6"></span></td>
                <td><h4><span id="item6"></span></h4></td>
                <td><h4><span id = "price6"> </span></h4></td>
                </tr>
                <tr>
                <td><img ><span id="pic7"></span></td>
                <td><h4><span id="item7"></span></h4></td>
                <td><h4><span id = "price7"> </span></h4></td> 
                </tr>
                <tr>
                <td><img ><span id="pic8"></span></td>
                <td><h4><span id="item8"></span></h4></td>
                <td><h4><span id = "price8"> </span></h4></td>
                </tr>
                <tr>
                <td><img ><span id="pic9"></span></td>
                <td><h4><span id="item9"></span></h4></td>
                <td><h4><span id = "price9"></span> </span></h4></td>
                </tr>
                </table>
                <span id="itemError" class="text-danger"></span><br>
            
                <!-- Display search results -->
                <!--<?php displayResults(); ?> -->
                            
            </div>
        </div> 
        <footer class="main-footer">
            <div class="container main-footer-container">
                <h7 class="band-name">Sign up AJAX</h7>
                <ul class="nav footer-nav">
                    <li>
                        <a href="https://www.youtube.com" target="_blank">
                            <img src="Images/youtube.png">
                        </a>
                    </li>
                    <li>
                        <a href="https://www.spotify.com" target="_blank">
                            <img src="Images/Spotify Logo.png">
                        </a>
                    </li>
                    <li>
                        <a href="https://www.facebook.com" target="_blank">
                            <img src="Images/Facebook Logo.png">
                        </a>
                    </li>
                </ul>
            </div>
        </footer>
        
       <script>
            
            var search = $("#pName").val();
            
            //Display city after zipcode
            $("#pName").on("change", function(){
                $.ajax({
                    method: "GET",
                    url: "http://api.walmartlabs.com/v1/search?apiKey=7eksjp57nqzw9hnb9hsudh93"+ search,
                    dataType: "json",
                    data: { "query":$("#pName").val() },
                    
                    success: function(result,status) {
                        //alert(result.items[0].name);
                        if (result != false){ 
                            $("#item0").html(result.items[0].name);
                            $("#item1").html(result.items[1].name);
                            $("#item2").html(result.items[2].name);
                            $("#item3").html(result.items[3].name);
                            $("#item4").html(result.items[4].name);
                            $("#item5").html(result.items[5].name);
                            $("#item6").html(result.items[6].name);
                            $("#item7").html(result.items[7].name);
                            $("#item8").html(result.items[8].name);
                            $("#item9").html(result.items[9].name);
                            
                            
                            $("#price0").html("$"+result.items[0].salePrice);
                            $("#price1").html("$"+result.items[1].salePrice);
                            $("#price2").html("$"+result.items[2].salePrice);
                            $("#price3").html("$"+result.items[3].salePrice);
                            $("#price4").html("$"+result.items[4].salePrice);
                            $("#price5").html("$"+result.items[5].salePrice);
                            $("#price6").html("$"+result.items[6].salePrice);
                            $("#price7").html("$"+result.items[7].salePrice);
                            $("#price8").html("$"+result.items[8].salePrice);
                            $("#price9").html("$"+result.items[9].salePrice);
                        }
                        else {
                            $("#itemError").html("The item you searched for is invalid");
                        }
                    } 
                });//ajax
            });//search
            
            
            //images
            var imageArray = [result.items[0].thumbnailImage,result.items[1].thumbnailImage,result.items[2].thumbnailImage,
                                    result.items[3].thumbnailImage,result.items[4].thumbnailImage,
                                    result.items[5].thumbnailImage,result.items[6].thumbnailImage,
                                    result.items[7].thumbnailImage,result.items[8].thumbnailImage,result.items[9].thumbnailImage];
            
            for (i = 0; i < 10; i++) { //for loop
                
                $.ajax({ //ajax for pictures
                
                    type: 'GET',
                    url: "http://api.walmartlabs.com/v1/search?apiKey=7eksjp57nqzw9hnb9hsudh93"+ search,
                    dataType: 'image/jpg',
                    async: true,
                    success: function (data) {
                        $("#pic" + i).attr("src", imageArray[i]);
                    }
                });
            }

            
        </script>
    </body>
</html>

